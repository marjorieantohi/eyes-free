<!DOCTYPE html>
<html>

<!-- <script src="https://hammerjs.github.io/dist/hammer.js"></script> -->

<head>
  <link rel="stylesheet" href="style.css">
  <script src="scripts/numberedVibrations.js"></script>
  <script src="scripts/random.js"></script>
</head>

<script type="text/javascript">

  // Globals to add the data later
  var globalName = "Test";
  var globalEmojiShown = "Test";
  var globalEmojiChosen = "Test";
  var globalTime = 0;

  // Globals to keep track of time
  var startTime;

  // Adds a row to the table.
  function addRow(name, emojiShown, emojiChosen, totalTime) {

    // Get our table
    var table = document.getElementById("emoVibesTable");

    // Make our row
    var row = table.insertRow(-1);

    // Make our cells
    var nameCell = row.insertCell(0);
    var emojiShownCell = row.insertCell(1);
    var emojiChosenCell = row.insertCell(2);
    var totalTimeCell = row.insertCell(3);

    // Assign the values
    nameCell.innerHTML = name;
    emojiShownCell.innerHTML = emojiShown;
    emojiChosenCell.innerHTML = emojiChosen;
    totalTimeCell.innerHTML = totalTime;
  }

  function hideEmojiClass() {
    globalTime = new Date().getTime() - start;
    document.getElementsByClassName('showEmojis')[0].style.visibility = 'hidden';
  }

  function showEmojiClass() {
    start = new Date().getTime();
    document.getElementsByClassName('showEmojis')[0].style.visibility = '';
  }

  function hideVibrationClass() {
    document.getElementsByClassName('beginVibration')[0].style.visibility = 'hidden';
  }

  function showVibrationClass() {
    document.getElementsByClassName('beginVibration')[0].style.visibility = '';
  }

  function playRandomPattern() {

    // Hide the button to play a vibration
    hideVibrationClass();

    // Used to choose a random pattern
    var randomNumber = getRandomInt(0, 6);

    // Used to calculate when to show emojis
    var timeTillDone;

    // Choose the pattern, note which pattern was played
    switch(randomNumber) {
      case 0:
        emotionalAngryEmoji();
        globalEmojiShown = "angry";
        timeTillDone = 2300;
        break;
      case 1:
        emotionalSadEmoji();
        globalEmojiShown = "sad";
        timeTillDone = 1500;
        break;
      case 2:
        emotionalLikeEmoji();
        globalEmojiShown = "like";
        timeTillDone = 250;
        break;
      case 3:
        emotionalHahaEmoji();
        globalEmojiShown = "haha";
        timeTillDone = 2000;
        break;
      case 4:
        emotionalHeartEmoji();
        globalEmojiShown = "heart";
        timeTillDone = 900;
        break;
      case 5:
        emotionalWowEmoji();
        globalEmojiShown = "wow";
        timeTillDone = 1000;
        break;
    }
    setTimeout(showEmojiClass,timeTillDone + 250);
  }

  function choseLike() {
    globalEmojiChosen = "like";
    addRowContainer();
  }

  function choseHaha() {
    globalEmojiChosen = "haha";
    addRowContainer();
  }

  function choseHeart() {
    globalEmojiChosen = "heart";
    addRowContainer();
  }

  function choseWow() {
    globalEmojiChosen = "wow";
    addRowContainer();
  }

  function choseSad() {
    globalEmojiChosen = "sad";
    addRowContainer();
  }

  function choseAngry() {
    globalEmojiChosen = "angry";
    addRowContainer();
  }

  function addRowContainer() {
    hideEmojiClass();
    addRow(globalName, globalEmojiShown, globalEmojiChosen, globalTime);
    showVibrationClass();
  }


</script>

<body>
  <div class="beginVibration">
    <div class="center-center">
     <button onclick="playRandomPattern()" class="button">Receive Message!</button>
    </div>
  </div>


  <div class="showEmojis">
    <div class="Header">
        Which emoji was it?
    </div>

    <div class="showEmojisRow">
      <div class="showEmojisColumn">
        <img onclick="choseLike()" src="images/like.png" alt="like" style="width:100%">
      </div>
      <div class="showEmojisColumn">
        <img onclick="choseHeart()" src="images/heart.png" alt="like" style="width:100%">
      </div>
      <div class="showEmojisColumn">
        <img onclick="choseHaha()" src="images/haha.png" alt="like" style="width:100%">
      </div>
    </div>
    <div class="showEmojisRow">
      <div class="showEmojisColumn">
        <img onclick="choseSad()" src="images/sad.png" alt="like" style="width:100%">
      </div>
      <div class="showEmojisColumn">
        <img onclick="choseAngry()" src="images/angry.png" alt="like" style="width:100%">
      </div>
      <div class="showEmojisColumn">
        <img onclick="choseWow()" src="images/wow.png" alt="like" style="width:100%">
      </div>
    </div>
  </div>
  <table id="emoVibesTable">
    <tr>
      <th>Participant</th>
      <th>Emoji Shown</th>
      <th>Emoji Chosen</th>
      <th>Time to Send</th>
    </tr>
  </table>
</body>

</html>
